/*
Copyright (c) 2017 NAVER Corp.
@egjs/flicking project is licensed under the MIT <https://naver.github.io/egjs/license.txt> license

@egjs/flicking JavaScript library
https://github.com/naver/egjs-flicking

@version 2.4.1-snapshot
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@egjs/flicking")):"function"==typeof define&&define.amd?define(["@egjs/flicking"],n):(t.eg=t.eg||{},t.eg.Flicking=t.eg.Flicking||{},t.eg.Flicking.plugin=t.eg.Flicking.plugin||{},t.eg.Flicking.plugin.ParallaxEffect=n(t.eg.Flicking))}(this,function(t){"use strict";var n=t.utils,e=n.extend(n.extend({},t.consts),{DIRECTION_NONE:t.DIRECTION_NONE,DIRECTION_LEFT:t.DIRECTION_LEFT,DIRECTION_RIGHT:t.DIRECTION_RIGHT,DIRECTION_UP:t.DIRECTION_UP,DIRECTION_DOWN:t.DIRECTION_DOWN,DIRECTION_HORIZONTAL:t.DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:t.DIRECTION_VERTICAL,DIRECTION_ALL:t.DIRECTION_ALL}),o=function(){var t=function(){function t(t){void 0===t&&(t={}),this.options=t}var n=t.prototype;return n.$componentWillMount=function(t){return this.$$=t,this.useWillChange="transform"===t.$container.style.willChange,this.useLayerHack=this.getInstanceConf().useLayerHack,this.bindEvents(),this.$componentMount(),this.$componentDidMount(),this},n.$componentDidMount=function(){return this},n.$componentWillUnmount=function(){var n=this;Object.keys(this).forEach(function(t){n[t]=null})},n.getInstanceConf=function(){return this.$$._conf},n.bindEvents=function(){this.$$.on({flick:this._onFlick.bind(this),flickEnd:this._onFlickEnd.bind(this),restore:this._onRestore.bind(this)})},n._onFlick=function(t){var n=t.pos,e=t.distance||n-this.$$._conf.panel.size;this.onFlick&&this.onFlick(t,e)},n._onFlickEnd=function(t){var n=(t.direction&e.DIRECTION_LEFT?"next":t.direction&e.DIRECTION_RIGHT&&"prev")||"";n&&this.arrange&&this.arrange(n),this.onFlickEnd&&this.onFlickEnd(t)},n._onRestore=function(t){this.onRestore&&this.onRestore(t)},t}();return t.utils=n,t.consts=e,t.VERSION="2.4.1-snapshot",t}();return function(n){var t,e;function i(t){return n.call(this,{selector:t})||this}e=n,(t=i).prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e;var s=i.prototype;return s.$componentMount=function(){var n=this;return this.imgs=this.$$.getAllElements().map(function(t){return t.querySelector(n.options.selector)}),this.resize(),this._build(),this},s._build=function(){var i=this,s=o.utils,r=this._getCurrIndex();s.css(this.getInstanceConf().panel.$list,{overflow:"hidden"}),this.imgs.forEach(function(t,n){var e=-50;n<r?e=50:r===n&&(e=0),i.useWillChange&&s.css(t,{willChange:"transform"}),i._setTranslate(t,e+"%",0)})},s._setTranslate=function(t,n,e){return t&&o.utils.css(t,{transform:o.utils.translate.apply(null,this.$$._getDataByDirection([n,e]).concat(this.useLayerHack))}),t},s._getCurrIndex=function(){return this.getInstanceConf().panel.currIndex},s._getPanel=function(){var t=this._getCurrIndex();return{prev:this.imgs[t-1],curr:this.imgs[t],next:this.imgs[t+1]}},s.arrange=function(t){this.$$.options.circular&&"resize"!==t&&(this.imgs="next"===t?this.imgs.concat(this.imgs.shift()):[this.imgs.pop()].concat(this.imgs));var n=this._getPanel();this._setTranslate(n.curr,0,0),/next|resize/.test(t)&&this._setTranslate(n.next,"50%",0),/prev|resize/.test(t)&&this._setTranslate(n.prev,"-50%",0)},s.onFlick=function(t,n){var e=this,i=t.pos,s=this.size,r=i%s/2,o=-(s/2-r);if(!(Math.abs(n)>=s)){var c=this._getPanel(),u=[];0<n&&c.next?(u.push({el:c.curr,x:r}),u.push({el:c.next,x:o})):n<0&&c.prev&&(u.push({el:c.curr,x:o}),u.push({el:c.prev,x:r})),u.forEach(function(t){return e._setTranslate(t.el,t.x+"px",0)})}},s.onRestore=function(){this.arrange("resize")},s.resize=function(){this.size=this.getInstanceConf().panel.size,this.onRestore("resize")},s.get=function(){return this.imgs[this._getCurrIndex()]},i}(o)});
//# sourceMappingURL=ParallaxEffect.min.js.map
