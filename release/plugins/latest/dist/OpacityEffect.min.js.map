{"version":3,"file":"OpacityEffect.min.js","sources":["../../../src/plugin/Plugin.js","../../../src/plugin/effects/OpacityEffect.js"],"sourcesContent":["/**\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Flicking from \"@egjs/flicking\";\n\n// is to through pass Flicking's utils & constants to plugins\nconst utils = Flicking.utils;\nconst consts = utils.extend(utils.extend({}, Flicking.consts), {\n\tDIRECTION_NONE: Flicking.DIRECTION_NONE,\n\tDIRECTION_LEFT: Flicking.DIRECTION_LEFT,\n\tDIRECTION_RIGHT: Flicking.DIRECTION_RIGHT,\n\tDIRECTION_UP: Flicking.DIRECTION_UP,\n\tDIRECTION_DOWN: Flicking.DIRECTION_DOWN,\n\tDIRECTION_HORIZONTAL: Flicking.DIRECTION_HORIZONTAL,\n\tDIRECTION_VERTICAL: Flicking.DIRECTION_VERTICAL,\n\tDIRECTION_ALL: Flicking.DIRECTION_ALL\n});\n\n/**\n * Base class to generate flicking plugin\n * Lifecycle: componentWillMount --> componentMount --> componentDidMount --> componentWillUnmount\n * @ko Flicking 플러그인을 생성하기 위한 기본 클래스\n * @alias eg.Flicking.plugin\n * @private\n */\nexport default class Plugin {\n\t/**\n\t * Constructor\n\t * @param {Object} options Option object <ko>옵션 객체</ko>\n\t */\n\tconstructor(options = {}) {\n\t\tthis.options = options;\n\t}\n\n\t/**\n\t * Before mounting. It's init point from Flicking instance\n\t * @param {Flicking} instance Flicking instance\n\t * @returns {Plugin}\n\t */\n\t$componentWillMount(instance) {\n\t\tthis.$$ = instance;\n\n\t\t// get hint and layer-hack setting\n\t\tthis.useWillChange = instance.$container.style.willChange === \"transform\";\n\t\tthis.useLayerHack = this.getInstanceConf().useLayerHack;\n\n\t\tthis.bindEvents();\n\t\tthis.$componentMount();\n\t\tthis.$componentDidMount();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * After mounting\n\t * @return {Plugin}\n\t */\n\t$componentDidMount() {\n\t\treturn this;\n\t}\n\n\t/**\n\t * Before the destroy\n\t */\n\t$componentWillUnmount() {\n\t\tObject.keys(this).forEach(v => {\n\t\t\tthis[v] = null;\n\t\t});\n\t}\n\n\tgetInstanceConf() {\n\t\treturn this.$$._conf;\n\t}\n\n\t/**\n\t * Bind flicking custom events\n\t */\n\tbindEvents() {\n\t\tthis.$$.on({\n\t\t\tflick: this._onFlick.bind(this),\n\t\t\tflickEnd: this._onFlickEnd.bind(this),\n\t\t\trestore: this._onRestore.bind(this)\n\t\t});\n\t}\n\n\t/**\n\t * 'flick' event handler\n\t * @param {Object} e\n\t * @private\n\t */\n\t_onFlick(e) {\n\t\tconst pos = e.pos;\n\t\tconst distance = e.distance || pos - this.$$._conf.panel.size;\n\n\t\tthis.onFlick && this.onFlick(e, distance);\n\t}\n\n\t/**\n\t * 'flickEnd' event handler\n\t * @param {Object} e\n\t * @private\n\t */\n\t_onFlickEnd(e) {\n\t\tconst type = (e.direction & consts.DIRECTION_LEFT && \"next\") ||\n\t\t\t(e.direction & consts.DIRECTION_RIGHT && \"prev\") || \"\";\n\n\t\ttype && this.arrange && this.arrange(type);\n\t\tthis.onFlickEnd && this.onFlickEnd(e);\n\t}\n\n\t/**\n\t * 'restore' event handler\n\t * @param {Object} e\n\t * @private\n\t */\n\t_onRestore(e) {\n\t\tthis.onRestore && this.onRestore(e);\n\t}\n\n\t/**\n\t * Constant to expose Flicking's utility\n\t * @ko Flicking 유틸리티\n\t * @name utils\n\t * @memberof Plugin\n\t * @static\n\t * @constant\n\t * @type {Object}\n\t * @private\n\t */\n\tstatic utils = utils;\n\n\t/**\n\t * Constant to expose Flicking's constant value\n\t * @ko Flicking 상수 값\n\t * @name utils\n\t * @memberof Plugin\n\t * @static\n\t * @constant\n\t * @type {Object}\n\t * @private\n\t */\n\tstatic consts = consts;\n\n\t/**\n\t * Version info string\n\t * @ko 버전정보 문자열\n\t * @name VERSION\n\t * @memberof Plugin\n\t * @static\n\t * @type {String}\n\t * @example\n\t * eg.Flicking.plugin.OpacityEffect.VERSION;  // ex) 2.2.0\n\t */\n\tstatic VERSION = \"#__VERSION__#\";\n}\n","/**\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Plugin from \"../Plugin\";\n\n/**\n * A plugin to add opacity effect attached with flicking interaction.\n * - Should be targeted only one element(or a wrapper element having child nodes) per panel.\n * @ko 플리킹 인터렉션에 따른 투명도 조절 효과 플러그인.\n * - 각 패널당 한 개의 요소(또는 자식노드를 포함하는 한 개의 래퍼요소)만 지정되어야 한다.\n * @alias eg.Flicking.plugin.OpacityEffect\n * @memberof eg.Flicking.plugin\n * @see eg.Flicking#plugin\n * @see eg.Flicking#plugins\n * @example\n * ```html\n * <div id=\"flick\">\n * \t<div><p>panel 0 <span class=\"text\">abc</span></p></div>\n * \t<div><p>panel 1 <span class=\"text\">abc</span></p></div>\n * \t<div><p>panel 2 <span class=\"text\">abc</span></p></div>\n * </div>\n * ```\n * ```js\n * // as namespace usage\n * new eg.Flicking(\"#some\")\n *  .plugin([\n *      // Apply opacity effect to '<span>' selector matched elements\n *      new eg.Flicking.plugin.OpacityEffect(\"span\")\n *  ]);\n *\n * // as ESM import usage\n * import Flicking from \"@egjs/flicking\";\n * import {OpacityEffect} from \"@egjs/flicking-plugins\";\n *\n * new Flicking(\"#some\")\n *  .plugin([\n *      new OpacityEffect(\"span\")\n *  ]);\n * ```\n */\nexport default class OpacityEffect extends Plugin {\n\t/**\n\t * Constructor\n\t * @param {String} selector Target element selector string <ko>대상 요소 셀렉터 문자열</ko>\n\t */\n\tconstructor(selector) {\n\t\tsuper({selector});\n\t}\n\n\t$componentMount() {\n\t\tthis.details = Plugin.utils.toArray(\n\t\t\tthis.$$.$wrapper.querySelectorAll(this.options.selector)\n\t\t);\n\n\t\tthis._build();\n\t\tthis.resize();\n\n\t\treturn this;\n\t}\n\n\t_build() {\n\t\tthis.details = [this.details.pop()].concat(this.details);\n\t}\n\n\t_setSelected(index, setClass) {\n\t\tconst utils = Plugin.utils;\n\n\t\tutils.classList(utils.css(this.details[index], {opacity: \"\"}), \"selected\", setClass);\n\t}\n\n\tresize() {\n\t\tthis.size = this.getInstanceConf().panel.size;\n\t\tthis.onRestore(\"resize\");\n\t}\n\n\tarrange(type) {\n\t\tif (type !== \"resize\") {\n\t\t\tthis.details = (type === \"next\") ?\n\t\t\t\tthis.details.concat(this.details.shift()) :\n\t\t\t\t[this.details.pop()].concat(this.details);\n\t\t}\n\n\t\tthis._setSelected(1, true);\n\n\t\t/next|resize/.test(type) && this._setSelected(0, false);\n\t\t/prev|resize/.test(type) && this._setSelected(2, false);\n\t}\n\n\tonFlick(e, distance) {\n\t\tconst pos = e.pos;\n\t\tconst per = (pos % this.size) / this.size;\n\t\tconst utils = Plugin.utils;\n\n\t\tif (Math.abs(distance) >= this.size) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst opacity = (distance > 0 && per <= 0.5 && 1 - (2 * per)) ||\n\t\t\t(distance < 0 && per > 0.5 && 2 * (per - 0.5));\n\n\t\topacity !== undefined && utils.css(this.details[1], {opacity});\n\t}\n\n\tonRestore() {\n\t\tthis.arrange(\"resize\");\n\t}\n\n\tget() {\n\t\treturn this.details[1];\n\t}\n}\n"],"names":["utils","Flicking","consts","extend","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","Plugin","options","$componentWillMount","instance","$$","useWillChange","$container","style","willChange","useLayerHack","this","getInstanceConf","bindEvents","$componentMount","$componentDidMount","$componentWillUnmount","Object","keys","forEach","v","_this","_conf","on","flick","_onFlick","bind","flickEnd","_onFlickEnd","restore","_onRestore","e","pos","distance","panel","size","onFlick","type","direction","arrange","onFlickEnd","onRestore","VERSION","selector","_Plugin","details","toArray","$wrapper","querySelectorAll","_build","resize","pop","concat","_setSelected","index","setClass","classList","css","opacity","shift","test","per","Math","abs","undefined","get"],"mappings":";;;;;;;;;oWAOA,IAAMA,EAAQC,EAASD,MACjBE,EAASF,EAAMG,OAAOH,EAAMG,OAAO,GAAIF,EAASC,QAAS,CAC9DE,eAAgBH,EAASG,eACzBC,eAAgBJ,EAASI,eACzBC,gBAAiBL,EAASK,gBAC1BC,aAAcN,EAASM,aACvBC,eAAgBP,EAASO,eACzBC,qBAAsBR,EAASQ,qBAC/BC,mBAAoBT,EAASS,mBAC7BC,cAAeV,EAASU,gBAUJC,iBAAAA,wBAKRC,YAAAA,IAAAA,EAAU,SAChBA,QAAUA,6BAQhBC,6BAAoBC,eACdC,GAAKD,OAGLE,cAAyD,cAAzCF,EAASG,WAAWC,MAAMC,gBAC1CC,aAAeC,KAAKC,kBAAkBF,kBAEtCG,kBACAC,uBACAC,qBAEEJ,QAORI,qCACQJ,QAMRK,4CACCC,OAAOC,KAAKP,MAAMQ,QAAQ,SAAAC,GACzBC,EAAKD,GAAK,UAIZR,kCACQD,KAAKN,GAAGiB,SAMhBT,2BACMR,GAAGkB,GAAG,CACVC,MAAOb,KAAKc,SAASC,KAAKf,MAC1BgB,SAAUhB,KAAKiB,YAAYF,KAAKf,MAChCkB,QAASlB,KAAKmB,WAAWJ,KAAKf,WAShCc,kBAASM,OACFC,EAAMD,EAAEC,IACRC,EAAWF,EAAEE,UAAYD,EAAMrB,KAAKN,GAAGiB,MAAMY,MAAMC,UAEpDC,SAAWzB,KAAKyB,QAAQL,EAAGE,MAQjCL,qBAAYG,OACLM,GAAQN,EAAEO,UAAY/C,EAAOG,eAAkB,OACnDqC,EAAEO,UAAY/C,EAAOI,iBAAmB,SAAW,GAErD0C,GAAQ1B,KAAK4B,SAAW5B,KAAK4B,QAAQF,QAChCG,YAAc7B,KAAK6B,WAAWT,MAQpCD,oBAAWC,QACLU,WAAa9B,KAAK8B,UAAUV,gBA3Fd9B,EAwGbZ,MAAQA,EAxGKY,EAoHbV,OAASA,EApHIU,EAgIbyC,QAAU,QAhIGzC,2CCoBR0C,UACXC,YAAM,CAACD,SAAAA,4HAGR7B,uCACM+B,QAAU5C,EAAOZ,MAAMyD,QAC3BnC,KAAKN,GAAG0C,SAASC,iBAAiBrC,KAAKT,QAAQyC,gBAG3CM,cACAC,SAEEvC,QAGRsC,uBACMJ,QAAU,CAAClC,KAAKkC,QAAQM,OAAOC,OAAOzC,KAAKkC,YAGjDQ,sBAAaC,EAAOC,OACblE,EAAQY,EAAOZ,MAErBA,EAAMmE,UAAUnE,EAAMoE,IAAI9C,KAAKkC,QAAQS,GAAQ,CAACI,QAAS,KAAM,WAAYH,MAG5EL,uBACMf,KAAOxB,KAAKC,kBAAkBsB,MAAMC,UACpCM,UAAU,aAGhBF,iBAAQF,GACM,WAATA,SACEQ,QAAoB,SAATR,EACf1B,KAAKkC,QAAQO,OAAOzC,KAAKkC,QAAQc,SACjC,CAAChD,KAAKkC,QAAQM,OAAOC,OAAOzC,KAAKkC,eAG9BQ,aAAa,GAAG,iBAEPO,KAAKvB,IAAS1B,KAAK0C,aAAa,GAAG,iBACnCO,KAAKvB,IAAS1B,KAAK0C,aAAa,GAAG,MAGlDjB,iBAAQL,EAAGE,OAEJ4B,EADM9B,EAAEC,IACKrB,KAAKwB,KAAQxB,KAAKwB,KAC/B9C,EAAQY,EAAOZ,WAEjByE,KAAKC,IAAI9B,IAAatB,KAAKwB,WAIzBuB,EAAsB,EAAXzB,GAAgB4B,GAAO,IAAO,EAAK,EAAIA,GACtD5B,EAAW,GAAW,GAAN4B,GAAa,GAAKA,EAAM,SAE9BG,IAAZN,GAAyBrE,EAAMoE,IAAI9C,KAAKkC,QAAQ,GAAI,CAACa,QAAAA,QAGtDjB,0BACMF,QAAQ,aAGd0B,sBACQtD,KAAKkC,QAAQ,OApEqB5C"}